<!-- First Row: Logo, Search, Actions -->
<div class="navbar-top">
  <a class="logo" routerLink="/products" aria-label="Go to products">{{ title() }}</a>

  <app-search-bar class="search-bar-container" />

  <div class="navbar-actions">
    <app-auth-button class="desktop-only"></app-auth-button>
    <app-theme-toggle class="desktop-only"></app-theme-toggle>
    <app-cart-button [itemCount]="cartItemCount()"></app-cart-button>
    <app-menu-sidebar class="mobile-only" />
  </div>
</div>

<!-- Second Row: Menu Sidebar and Category Links (Desktop only) -->
<div class="navbar-bottom">
  <app-menu-sidebar />

  <nav class="categories-nav" aria-label="Categories">
    <ul>
      @for (category of categories(); track category.id) {
        <li>
          <a
            [routerLink]="['/products']"
            [queryParams]="{ category: category.slug }"
            routerLinkActive="is-active"
            [attr.aria-label]="'Browse ' + category.name"
          >
            {{ category.name }}
          </a>
        </li>
      }
    </ul>
  </nav>
</div>

<!-- Mobile Navigation Overlay -->
@if (isMobileMenuOpen()) {
  <div class="mobile-nav-overlay" (click)="closeMobileMenu()">
    <nav class="mobile-nav" aria-label="Mobile menu" (click)="$event.stopPropagation()">
      <!-- Close button -->
      <div class="mobile-nav-header">
        <app-close-button
          variant="default"
          size="lg"
          ariaLabel="Close menu"
          (clicked)="closeMobileMenu()"
        />
      </div>
      <div class="mobile-auth">
        <app-auth-button [additionalClick]="closeMobileMenu"></app-auth-button>
      </div>
    </nav>
  </div>
}
