<a class="logo" routerLink="/products" aria-label="Go to products">{{ title() }}</a>

<!-- Desktop Navigation -->
<nav class="desktop-nav" aria-label="Main">
  <ul>
    @for (item of navigation(); track item.path) {
      <li>
        <a
          routerLinkActive="is-active"
          [routerLinkActiveOptions]="{ exact: true }"
          #rla="routerLinkActive"
          [attr.aria-current]="rla.isActive ? 'page' : null"
          [routerLink]="item.path"
          [attr.aria-label]="item.ariaLabel"
        >
          {{ item.label }}
          @if (item.path === '/cart' && cartItemCount() > 0) {
            <span class="cart-badge" [attr.aria-label]="cartItemCount() + ' items in cart'">
              {{ cartItemCount() }}
            </span>
          }
        </a>
      </li>
    }
  </ul>
</nav>

<div class="navbar-actions">
  <app-theme-toggle></app-theme-toggle>

  <!-- Mobile Hamburger Button -->
  <button
    class="mobile-menu-toggle"
    type="button"
    (click)="toggleMobileMenu()"
    [attr.aria-expanded]="isMobileMenuOpen()"
    [attr.aria-label]="isMobileMenuOpen() ? 'Close menu' : 'Open menu'"
  >
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>
</div>

<!-- Mobile Navigation Overlay -->
@if (isMobileMenuOpen()) {
  <div class="mobile-nav-overlay" (click)="closeMobileMenu()">
    <nav class="mobile-nav" aria-label="Mobile menu" (click)="$event.stopPropagation()">
      <!-- Close button -->
      <div class="mobile-nav-header">
        <button
          class="mobile-nav-close"
          type="button"
          (click)="closeMobileMenu()"
          aria-label="Close menu"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <ul>
        @for (item of navigation(); track item.path) {
          <li>
            <a
              routerLinkActive="is-active"
              [routerLinkActiveOptions]="{ exact: true }"
              #rla="routerLinkActive"
              [attr.aria-current]="rla.isActive ? 'page' : null"
              [routerLink]="item.path"
              [attr.aria-label]="item.ariaLabel"
              (click)="closeMobileMenu()"
            >
              {{ item.label }}
              @if (item.path === '/cart' && cartItemCount() > 0) {
                <span class="cart-badge" [attr.aria-label]="cartItemCount() + ' items in cart'">
                  {{ cartItemCount() }}
                </span>
              }
            </a>
          </li>
        }
      </ul>
    </nav>
  </div>
}
