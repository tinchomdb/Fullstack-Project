<div class="cart-container">
  <h1>Shopping Cart</h1>

  @if (cart(); as cartData) {
    @if (!isEmpty()) {
      <app-sidebar-layout>
        <div main class="cart-content">
          <div class="cart-items">
            @for (item of cartData.items; track item.productId) {
              <app-cart-item
                [item]="item"
                [currency]="cartData.currency"
                (quantityChange)="updateQuantity(item.productId, $event)"
                (remove)="removeItem(item.productId)"
                data-testid="cart-item"
              />
            }
          </div>
        </div>
        <div sidebar>
          <app-order-summary-panel
            [cart]="cart()"
            [showItemDetails]="false"
            ctaLabel="Proceed to Checkout"
            [showSecondaryCta]="true"
            secondaryCtaLabel="Clear Cart"
            (ctaClick)="checkout()"
            (secondaryCtaClick)="clearCart()"
            data-testid="order-summary-panel"
          />
        </div>
      </app-sidebar-layout>
    } @else {
      <div class="empty-cart-state" data-testid="empty-cart">
        <div class="empty-cart-icon">
          <app-cart-icon [size]="48" [strokeWidth]="2" />
        </div>
        <h2>Your cart is empty</h2>
        <p>Looks like you haven't added anything yet. Start shopping to find something you love!</p>
        <app-button class="cta-button" (click)="goToProducts()">Continue Shopping</app-button>
      </div>
    }
  }
</div>
